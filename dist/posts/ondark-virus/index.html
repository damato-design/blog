<!DOCTYPE html><head><meta charset="UTF-8"><title>Ondark virus</title><meta name="viewport" content="width=device-width"><meta name="description" content="Design Systems Hot Takes"><meta name="generator" content="Astro v3.5.5"><meta property="og:title" content="Ondark virus"><meta property="og:description" content="Design Systems Hot Takes"><meta property="og:url" content="https://blog.damato.design/posts/ondark-virus/"><meta property="og:image" content="https://blog.damato.design/og-images/ondark-virus.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="og:image:alt" content="Donnie D'Amato's blog"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@donniedamato"><meta name="twitter:creator" content="@donniedamato"><meta name="twitter:title" content="Ondark virus"><meta name="twitter:description" content="Design Systems Hot Takes"><meta name="twitter:image" content="https://blog.damato.design/og-images/ondark-virus.png"><meta name="twitter:image:alt" content="Donnie D'Amato's blog"><link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;700&family=PT+Sans+Narrow:wght@700&display=swap" rel="stylesheet"><style>@font-face{font-family:Garamond Nova;src:url(/fonts/garamondnova-italic.woff2) format("woff2");weight:400}@font-face{font-family:Garamond Nova;src:url(/fonts/garamondnova-light.woff2) format("woff2");weight:300}*,*:before,*:after{box-sizing:border-box}:root{--content-width: 860px;--card-width: 260px;--box-surface-bg: #f9f9f4;--box-surface-fg: #111;--box-contrast-bg: #001;--box-contrast-fg: #fff;--box-raised-bg: #fff;--box-raised-fg: #000;--box-raised-shadow: drop-shadow(0 .1rem .5rem rgba(0, 0, 0, .1))}body{margin:0;font-family:Merriweather,Book Antiqua,Palatino,Palatino Linotype,Palatino LT STD,Georgia,serif;font-size:1rem;font-weight:300;line-height:1.5;background:var(--box-surface-bg);color:var(--box-surface-fg);margin-bottom:10vw}img{max-width:100%}a{color:inherit;text-decoration-color:var(--heat);font-weight:700}.max-width{max-width:min(var(--content-width) - 2rem,100vw - 2rem);margin-inline:auto}header[data-astro-cid-3ef6ksr2]{padding-block:2rem}.max-width[data-astro-cid-3ef6ksr2]{display:flex;justify-content:space-between;align-items:center;gap:1rem}a[data-astro-cid-3ef6ksr2]{color:inherit;display:flex;flex-direction:column;text-decoration:none;line-height:1;font-size:1.5em}h1[data-astro-cid-3ef6ksr2]{font-size:1rem;font-weight:400;line-height:1;font-family:Garamond Nova}
.spine[data-astro-cid-vevxbnpu]{display:grid;grid-template-columns:auto 1fr auto;border-radius:2px;overflow:hidden}.spine[data-astro-cid-vevxbnpu]:after{content:"";display:block;grid-column:1 / -1;height:100%;grid-row:1 / -1;position:relative;pointer-events:none;box-shadow:inset 0 1rem 2rem #c8c8c880,inset 0 -1rem 2rem #c8c8c880}.animal[data-astro-cid-vevxbnpu]{grid-row:1;grid-column:1;width:16vw;max-width:10rem;display:flex;align-items:center;background:black;padding:1rem}.animal[data-astro-cid-vevxbnpu] img[data-astro-cid-vevxbnpu]{background:white;transform:rotate(-90deg)}.title[data-astro-cid-vevxbnpu]{grid-row:1;grid-column:2;container-type:inline-size;display:flex;align-items:center;justify-content:center;color:#fff;flex:1;font-family:Garamond Nova}.title[data-astro-cid-vevxbnpu] h2[data-astro-cid-vevxbnpu]{font-weight:300;font-size:8cqi;text-wrap:balance;line-height:1.1;padding:.25em;margin:0}.title[data-astro-cid-vevxbnpu] span[data-astro-cid-vevxbnpu]{text-wrap:nowrap;padding:1em;margin-inline-start:auto}.publisher[data-astro-cid-vevxbnpu]{grid-row:1;grid-column:3;background:black;color:#fff;display:flex;align-items:center;padding:1rem;text-decoration:none;--heat: currentColor}article{font-size:1.2em}article :where(h2,h3,h4,h5,h6){font-family:PT Sans Narrow;text-transform:capitalize}article code{font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;filter:brightness(.8)}article :not(pre)>code{color:var(--heat)}
</style></head><body style="--heat: #EA8729;"> <header data-astro-cid-3ef6ksr2> <div class="max-width" data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2> <svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 784.03 144.72" fill="currentColor" width="6em">
	<path d="m119.8,44.52c-3.62-8.51-8.68-15.94-15.18-22.31-6.5-6.36-14.1-11.32-22.81-14.87-8.71-3.55-18.16-5.33-28.34-5.33H0v140.7h53.87c10.05,0,19.43-1.77,28.14-5.33,8.71-3.55,16.28-8.51,22.71-14.87,6.43-6.36,11.46-13.83,15.07-22.41,3.62-8.57,5.43-17.82,5.43-27.74s-1.81-19.33-5.43-27.84Zm-24.42,53.47c-4.09,7.44-9.78,13.23-17.08,17.39-7.31,4.15-15.78,6.23-25.43,6.23h-29.75V23.11h29.75c9.51,0,17.92,2.08,25.23,6.23,7.3,4.15,13.03,9.92,17.19,17.29,4.15,7.37,6.23,15.88,6.23,25.53s-2.04,18.39-6.13,25.83Z" />
	<path style="fill: var(--heat, currentColor);" d="m160.9,4.52c-3.01-3.02-6.53-4.52-10.55-4.52s-7.71,1.51-10.65,4.52c-2.95,3.02-4.42,6.67-4.42,10.95,0,4.02,1.31,7.34,3.92,9.95,1.87,1.87,3.86,3.06,5.98,3.59l-11.91,22.24,12.26,6.63,14.87-27.34c1.88-3.62,3.18-6.6,3.92-8.94.73-2.34,1.11-4.39,1.11-6.13,0-4.29-1.51-7.94-4.52-10.95Z" />
	<path class="cls-1" d="m239.37,142.71h24.93L206.81,2.01h-16.08l-57.89,140.7h24.52l10.82-27.13h60.47l10.72,27.13Zm-63.18-47.23l22.36-56.1,22.16,56.1h-44.52Z" />
	<polygon points="396.95 2.01 343.69 89.69 290.42 2.01 274.34 2.01 274.34 142.71 297.46 142.71 297.46 52.61 335.65 115.37 351.73 115.37 389.92 52.61 389.92 142.71 413.03 142.71 413.03 2.01 396.95 2.01" />
	<path d="m529.61,142.71h24.92L497.05,2.01h-16.08l-57.89,140.7h24.52l10.82-27.13h60.47l10.72,27.13Zm-63.18-47.23l22.36-56.09,22.16,56.09h-44.52Z" />
	<polygon points="642.9 2.01 528.13 2.01 528.13 23.11 573.96 23.11 573.96 142.71 597.07 142.71 597.07 23.11 642.9 23.11 642.9 2.01" />
	<path d="m712.67,144.72c-10.05,0-19.43-1.88-28.14-5.63-8.71-3.75-16.35-8.94-22.91-15.58-6.57-6.63-11.69-14.34-15.38-23.12-3.69-8.77-5.53-18.19-5.53-28.24s1.84-19.43,5.53-28.14c3.68-8.71,8.78-16.38,15.28-23.01,6.5-6.63,14.07-11.79,22.71-15.48,8.64-3.68,17.99-5.53,28.04-5.53s19.4,1.84,28.04,5.53c8.64,3.69,16.25,8.84,22.81,15.48,6.56,6.63,11.69,14.34,15.38,23.12,3.68,8.78,5.53,18.19,5.53,28.24s-1.84,19.47-5.53,28.24c-3.69,8.78-8.78,16.45-15.28,23.01-6.5,6.57-14.07,11.73-22.71,15.48-8.64,3.75-17.92,5.63-27.84,5.63Zm-.4-22.11c9.51,0,17.85-2.14,25.02-6.43,7.17-4.29,12.79-10.22,16.88-17.79,4.09-7.57,6.13-16.31,6.13-26.23,0-7.37-1.17-14.1-3.52-20.2-2.35-6.1-5.66-11.39-9.95-15.88-4.29-4.49-9.35-7.94-15.18-10.35s-12.29-3.62-19.4-3.62c-9.38,0-17.66,2.11-24.82,6.33-7.17,4.22-12.8,10.08-16.88,17.59-4.09,7.51-6.13,16.22-6.13,26.13,0,7.37,1.17,14.17,3.52,20.4,2.34,6.23,5.63,11.56,9.85,15.98,4.22,4.42,9.28,7.87,15.18,10.35,5.9,2.48,12.33,3.72,19.3,3.72Z" />
</svg>
 <h1 data-astro-cid-3ef6ksr2>Design Systems Hot Takes</h1> </a> <a href="/feed.xml" data-astro-cid-3ef6ksr2> <svg viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" role="presentation" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" width="2rem" fill="currentColor"><path d="M119.9 336.1c-30.8 0-55.9 25.1-55.9 55.8 0 30.8 25.1 55.6 55.9 55.6 30.9 0 55.9-24.9 55.9-55.6 0-30.7-25-55.8-55.9-55.8z"></path><path d="M64 192v79.9c48 0 94.1 14.2 128 48.1 33.9 33.9 48 79.9 48 128h80c0-139.9-116-256-256-256z"></path><path d="M64 64v79.9c171 0 303.9 133 303.9 304.1H448C448 236.3 276 64 64 64z"></path></svg> </a> </div> </header> <div data-astro-cid-vevxbnpu> <div class="spine max-width" data-astro-cid-vevxbnpu> <div class="animal" data-astro-cid-vevxbnpu> <img src="/animals/bat.png" data-astro-cid-vevxbnpu> </div> <div class="title" style="background: #EA8729" data-astro-cid-vevxbnpu> <h2 data-astro-cid-vevxbnpu>Ondark virus</h2> <span data-astro-cid-vevxbnpu>9 min read</span> </div> <a class="publisher" href="/" data-astro-cid-vevxbnpu> <svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 784.03 144.72" fill="currentColor" width="6em">
	<path d="m119.8,44.52c-3.62-8.51-8.68-15.94-15.18-22.31-6.5-6.36-14.1-11.32-22.81-14.87-8.71-3.55-18.16-5.33-28.34-5.33H0v140.7h53.87c10.05,0,19.43-1.77,28.14-5.33,8.71-3.55,16.28-8.51,22.71-14.87,6.43-6.36,11.46-13.83,15.07-22.41,3.62-8.57,5.43-17.82,5.43-27.74s-1.81-19.33-5.43-27.84Zm-24.42,53.47c-4.09,7.44-9.78,13.23-17.08,17.39-7.31,4.15-15.78,6.23-25.43,6.23h-29.75V23.11h29.75c9.51,0,17.92,2.08,25.23,6.23,7.3,4.15,13.03,9.92,17.19,17.29,4.15,7.37,6.23,15.88,6.23,25.53s-2.04,18.39-6.13,25.83Z" />
	<path style="fill: var(--heat, currentColor);" d="m160.9,4.52c-3.01-3.02-6.53-4.52-10.55-4.52s-7.71,1.51-10.65,4.52c-2.95,3.02-4.42,6.67-4.42,10.95,0,4.02,1.31,7.34,3.92,9.95,1.87,1.87,3.86,3.06,5.98,3.59l-11.91,22.24,12.26,6.63,14.87-27.34c1.88-3.62,3.18-6.6,3.92-8.94.73-2.34,1.11-4.39,1.11-6.13,0-4.29-1.51-7.94-4.52-10.95Z" />
	<path class="cls-1" d="m239.37,142.71h24.93L206.81,2.01h-16.08l-57.89,140.7h24.52l10.82-27.13h60.47l10.72,27.13Zm-63.18-47.23l22.36-56.1,22.16,56.1h-44.52Z" />
	<polygon points="396.95 2.01 343.69 89.69 290.42 2.01 274.34 2.01 274.34 142.71 297.46 142.71 297.46 52.61 335.65 115.37 351.73 115.37 389.92 52.61 389.92 142.71 413.03 142.71 413.03 2.01 396.95 2.01" />
	<path d="m529.61,142.71h24.92L497.05,2.01h-16.08l-57.89,140.7h24.52l10.82-27.13h60.47l10.72,27.13Zm-63.18-47.23l22.36-56.09,22.16,56.09h-44.52Z" />
	<polygon points="642.9 2.01 528.13 2.01 528.13 23.11 573.96 23.11 573.96 142.71 597.07 142.71 597.07 23.11 642.9 23.11 642.9 2.01" />
	<path d="m712.67,144.72c-10.05,0-19.43-1.88-28.14-5.63-8.71-3.75-16.35-8.94-22.91-15.58-6.57-6.63-11.69-14.34-15.38-23.12-3.69-8.77-5.53-18.19-5.53-28.24s1.84-19.43,5.53-28.14c3.68-8.71,8.78-16.38,15.28-23.01,6.5-6.63,14.07-11.79,22.71-15.48,8.64-3.68,17.99-5.53,28.04-5.53s19.4,1.84,28.04,5.53c8.64,3.69,16.25,8.84,22.81,15.48,6.56,6.63,11.69,14.34,15.38,23.12,3.68,8.78,5.53,18.19,5.53,28.24s-1.84,19.47-5.53,28.24c-3.69,8.78-8.78,16.45-15.28,23.01-6.5,6.57-14.07,11.73-22.71,15.48-8.64,3.75-17.92,5.63-27.84,5.63Zm-.4-22.11c9.51,0,17.85-2.14,25.02-6.43,7.17-4.29,12.79-10.22,16.88-17.79,4.09-7.57,6.13-16.31,6.13-26.23,0-7.37-1.17-14.1-3.52-20.2-2.35-6.1-5.66-11.39-9.95-15.88-4.29-4.49-9.35-7.94-15.18-10.35s-12.29-3.62-19.4-3.62c-9.38,0-17.66,2.11-24.82,6.33-7.17,4.22-12.8,10.08-16.88,17.59-4.09,7.51-6.13,16.22-6.13,26.13,0,7.37,1.17,14.17,3.52,20.4,2.34,6.23,5.63,11.56,9.85,15.98,4.22,4.42,9.28,7.87,15.18,10.35,5.9,2.48,12.33,3.72,19.3,3.72Z" />
</svg>
 </a> </div> </div> <div class="max-width" style="--heat: #EA8729;"> <!-- <Navigation headings={ toc.get(1).children } /> --> <article style="--heat: #EA8729;"> <p>The ‚Äúondark‚Äù virus is infecting token names in the design systems community everywhere. I‚Äôve tried providing recommendations in token related posts and replies before. However, it seems this approach is becoming more wide-spread so I want to give it one final try to describe the problem with this naming scheme and provide some help with prevention.</p>
<p><strong>This isn‚Äôt about what a token name should include, it‚Äôs about what it shouldn‚Äôt.</strong></p>
<h2 id="prognosis">Prognosis</h2>
<p>Imagine you have a UI which is primarily light colored. Perhaps a white background with nearly black text. There‚Äôs a section in this UI that you want to have a stark contrast with the rest of the page. In this section, you have some text lockup and a call-to-action button. The button has all the same properties that other buttons in the system have, except it‚Äôs located on this dark background.</p>
<p>Most folks might have a button prepared specifically for this scenario. We might even provide a configuration for when this happens in code. Under the hood, that might reference different tokens which point to specific <code>ondark</code> values sent to the page.</p>
<iframe height="500" style="width: 100%;" scrolling="no" title="ondark" src="https://codepen.io/fauxserious/embed/gOjWGaz?default-tab=html%2Cresult&#x26;editable=true" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen>
  See the Pen &#x3C;a href="https://codepen.io/fauxserious/pen/gOjWGaz">
  ondark&#x3C;/a> by Donnie D'Amato (&#x3C;a href="https://codepen.io/fauxserious">@fauxserious&#x3C;/a>)
  on &#x3C;a href="https://codepen.io">CodePen&#x3C;/a>.
</iframe>
<p>This works fine for this section which covers just the background, text, and button.</p>
<p>Soon after, a request comes in to show a comparison table in this area; showcasing the benefits of the product of feature. In the current system, you‚Äôd need tokens to describe all of the borders of the table. Maybe you have something generic that targets borders in this area. But unfortunately, you might see a problem begin to appear.</p>
<p>The problem is that for every UI element that <em>might</em> appear in this section in the future, you‚Äôd need to define an entirely new set of tokens to describe the color for that UI. This is especially exhausting since you‚Äôve already defined tokens semantically for all of these things in the ‚Äúdefault‚Äù environment. To fully cover the dark area, you‚Äôd need to <strong>double the amount of token names</strong> to include the additional ‚Äúondark‚Äù (or ‚Äúinverse‚Äù, ‚Äúreverse‚Äù, ‚Äúcontrast‚Äù) infix.</p>
<p>No bueno.</p>
<h2 id="remedy">Remedy</h2>
<h3 id="semantic-tokens">Semantic tokens</h3>
<p>The first step is fully investing in semantic tokens. <a href="../tokens-as-intents">I‚Äôve called them ‚Äúintents‚Äù</a> in the past to further enforce the expectation that the name describes purpose over value. We‚Äôre talking about token names like <code>--button-background</code> or <code>--input-focused-critical-border-color</code> which give information about the component or pattern and the property being influenced. In no way does it give any information about what the value of this color is. The more you avoid encoding the value in the name, the more flexible your system will be with the opportunity for that color to change in the future.</p>
<p>This extends to any token; describe the purpose and avoid the value when naming.</p>
<h3 id="scoped-themes">Scoped themes</h3>
<p>A theme is the collection of values assigned to semantic tokens. The semantic tokens are a contract that should have permanence and meet expectations of folks building UI over time. These are the tokens that appear on the <em>left-side</em> of a theme. The values that would appear on the <em>right-side</em> can and should have a separate stakeholder, most likely one that represents a brand. I recommend avoiding managing both sides if possible to not introduce subjective bias or confusion in token naming.</p>
<p><img src="/images/token-responsibility.png" alt="Be responsible for the left side theme assignment, avoid the right side"></p>
<p>I cannot stress enough, <strong>how values are assigned on the right-side does not matter</strong>. Values can be referenced, hard-coded, computed, or otherwise because they should never be used directly within the UI. A color palette is influenced by the brand and determines what <code>--brand-blue-500</code> means. Here, the brand is responsible for curating the right-side values and how they are finally assigned to the left-side.</p>
<p>The design system team is responsible for maintaining consistency on the left-side; that‚Äôs it. They should only focus on the semantic token names for those values to be assigned and how they might support describing the experience at scale.</p>
<p>{% aside ‚Äúwarning‚Äù %}
While I advocate for design systems folks to be hands-off for the right-side of the theme, it is not possible to be completely ignorant of what happens there. We should be providing guidance on best practices when curating the other side, especially in terms of accessibility. We should provide feedback when people attempt to choose color combinations that have low contrast or font-sizes that are illegible.</p>
<p>And certainly when posed with limited resources, it‚Äôs entirely possible for the design system team to manage both sides. But if you can avoid it, it‚Äôs one less thing to be responsible for.
{% endaside %}</p>
<p>{% aside %}
Note that for simplicity the idea of ‚Äúdark-mode‚Äù is also well represented by providing a dark theme. A user preference for ‚Äúhigh-contrast mode‚Äù is asking for a high-contrast theme. The mode is the user preference. The theme is a collection of value assignments that aim to satisfy the mode.
{% endaside %}</p>
<p>Now for the key insight ‚Äî instead of the dark area and the light colored page needing to be informed by a single theme, <strong>think of the dark area as an entirely separate theme</strong>. In this way, the values that represent <code>--button-background</code> can change depending on scope.</p>
<iframe height="500" style="width: 100%;" scrolling="no" title="ondark" src="https://codepen.io/fauxserious/embed/jOpmGbR?default-tab=html%2Cresult&#x26;editable=true" frameborder="no" loading="lazy" allowtransparency="true" allowfullscreen>
  See the Pen &#x3C;a href="https://codepen.io/fauxserious/pen/jOpmGbR">
  ondark&#x3C;/a> by Donnie D'Amato (&#x3C;a href="https://codepen.io/fauxserious">@fauxserious&#x3C;/a>)
  on &#x3C;a href="https://codepen.io">CodePen&#x3C;/a>.
</iframe>
<ul>
<li><strong>No additional configuration at the component level.</strong> You don‚Äôt need to remember or even know that this button is on a ‚Äúdark‚Äù surface.</li>
<li><strong>No additional token names.</strong> Self explanatory, naming is hard and scaling those names is even harder.</li>
</ul>
<p>Now the only name you need is the one describing the theme; ‚Äúdark‚Äù.</p>
<h2 id="prescription">Prescription</h2>
<p>This still requires the design token values to be curated to account for a dark UI. If you worried about defining an entire new theme worth of tokens, start small. Only define the ones you need at first; maybe background, text and button. At some point you might have the resources to define it all and then you‚Äôll have an entire new theme to try.</p>
<p>I‚Äôve considered going farther, specifically with surfaces that expect to demonstrate feedback (eg., warning banner). You might imagine this banner similar to the dark section above with a text lockup and action to take. I say if you have the resources to prepare this as a theme, go for it! You‚Äôll be better prepared for when code samples might appear within the notification. Otherwise, you‚Äôll need to be highly restrictive to the kinds of content that appear within various colored surfaces. And we all know how much designers love restrictions. üòâ</p>
<p>It‚Äôs possible to over compensate. As an example I wouldn‚Äôt recommend creating a separate theme for inline feedback elements. Badges, notification dots, and error text can and should also be handled semantically inside a normal theme. Just think of a newsletter signup in a dark section; it should have an error message if the input isn‚Äôt valid. If you think in surfaces, like a sub-artboard, then you‚Äôll better identify when a scoped theme would help.</p>
<p>This new recommendation also requires that the system delivering themes be flexible enough to request more than one. I think there‚Äôs an opportunity for some optimization here as well; where we statically analyze the page for tokens used within scopes and only serve what‚Äôs needed. However, to start you could just import the theme when a scope is added. The benefit of this is if the scoped theme hasn‚Äôt been included or the scope hasn‚Äôt been applied, it‚Äôll fallback to the base theme values instead.</p>
<pre class="astro-code css-variables" style="background-color:var(--astro-code-color-background);color:var(--astro-code-color-text); overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:var(--astro-code-color-text)">&#x3C;</span><span style="color:var(--astro-code-token-string-expression)">body</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">    &#x3C;</span><span style="color:var(--astro-code-token-string-expression)">button</span><span style="color:var(--astro-code-color-text)">>This button has a black background&#x3C;/</span><span style="color:var(--astro-code-token-string-expression)">button</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">    &#x3C;</span><span style="color:var(--astro-code-token-string-expression)">section</span><span style="color:var(--astro-code-token-function)"> data-theme</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-token-string-expression)">"dark"</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-token-comment)">        &#x3C;!-- Missing definition for the dark theme, </span></span>
<span class="line"><span style="color:var(--astro-code-token-comment)">        everything here inherits from the light theme --></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">        &#x3C;</span><span style="color:var(--astro-code-token-string-expression)">button</span><span style="color:var(--astro-code-color-text)">>This button has a black background&#x3C;/</span><span style="color:var(--astro-code-token-string-expression)">button</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">    &#x3C;/</span><span style="color:var(--astro-code-token-string-expression)">section</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">&#x3C;/</span><span style="color:var(--astro-code-token-string-expression)">body</span><span style="color:var(--astro-code-color-text)">></span></span></code></pre>
<h2 id="recovery">Recovery</h2>
<p>If you‚Äôre already using the ‚Äúondark‚Äù naming convention, it‚Äôll be hard to move to this new system. That goes for any semantic token that was expected for public use. Deprecating tokens at the semantic tier is very difficult because they could be used anywhere across the platform.</p>
<p>Luckily there‚Äôs a path forward:</p>
<ol>
<li>First, you can setup the scopes and apply within the UI in the appropriate locations, making note of the UI elements that exist in those locations.</li>
<li>Then define the values for those themes, perhaps reading from the ‚Äúondark‚Äù values.</li>
<li>Start serving those themes to the pages, which will be inert at first because no UI elements should reference the tokens.</li>
<li>Finally, either remove the component configuration that applies the dark theme or remove the ‚Äúondark‚Äù token assignments for the more generic tokens.</li>
<li>You can now safely remove the ‚Äúondark‚Äù token virus from your system.</li>
</ol>
<p>I wish you best of luck in your path toward recovery.</p>
<hr>
<p><strong>EDIT (2023-01-12):</strong> <a href="https://desandro.com/">Dave</a> posted a great question as a follow-up and it deserves addressing.</p>
<p>{% quote ‚Äù<a href="https://twitter.com/desandro/status/1613568348331155456">https://twitter.com/desandro/status/1613568348331155456</a>‚Äù ‚ÄúDave DeSandro‚Äù %}</p>
<p>I‚Äôm curious how you would accommodate session-level Dark Mode? Does the hero theme stay dark, or maybe sub-themes like <code>data-theme='inverted'</code></p>
<p>{% endquote %}</p>
<p><a href="https://twitter.com/donniedamato/status/1613583101493481487">My reply</a> was half-joking but in seriousness, the answer is to continue leaning into semantic naming at the <em>scope</em> level. For the purposes of this demonstration, it was more helpful to use the word ‚Äúdark‚Äù to further cement what was happening within the scope. In practice, the scope should be described with some meaning or purpose for the change in scope over expected appearance. For the examples above, the ‚Äúlight‚Äù theme could instead be the ‚Äúbase‚Äù theme as it is meant to be the default. The ‚Äúdark‚Äù theme could be ‚Äúfeature‚Äù theme as it is meant to highlight features (in our examples).</p>
<pre class="astro-code css-variables" style="background-color:var(--astro-code-color-background);color:var(--astro-code-color-text); overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:var(--astro-code-color-text)">&#x3C;</span><span style="color:var(--astro-code-token-string-expression)">body</span><span style="color:var(--astro-code-token-function)"> data-theme</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-token-string-expression)">"base"</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">    &#x3C;</span><span style="color:var(--astro-code-token-string-expression)">button</span><span style="color:var(--astro-code-color-text)">>Login&#x3C;/</span><span style="color:var(--astro-code-token-string-expression)">button</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">    &#x3C;</span><span style="color:var(--astro-code-token-string-expression)">section</span><span style="color:var(--astro-code-token-function)"> data-theme</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-token-string-expression)">"feature"</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">        &#x3C;</span><span style="color:var(--astro-code-token-string-expression)">button</span><span style="color:var(--astro-code-color-text)">>Click here&#x3C;/</span><span style="color:var(--astro-code-token-string-expression)">button</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">    &#x3C;/</span><span style="color:var(--astro-code-token-string-expression)">section</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">&#x3C;/</span><span style="color:var(--astro-code-token-string-expression)">body</span><span style="color:var(--astro-code-color-text)">></span></span></code></pre>
<p>This way user preferences could be read to determine what values are applied to which scope.</p>
<pre class="astro-code css-variables" style="background-color:var(--astro-code-color-background);color:var(--astro-code-color-text); overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:var(--astro-code-token-comment)">/* no-preference */</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">[</span><span style="color:var(--astro-code-token-function)">data-theme</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-token-string-expression)">"base"</span><span style="color:var(--astro-code-color-text)">] {</span></span>
<span class="line"><span style="color:var(--astro-code-token-comment)">  /* light colored assignments */</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--astro-code-color-text)">[</span><span style="color:var(--astro-code-token-function)">data-theme</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-token-string-expression)">"feature"</span><span style="color:var(--astro-code-color-text)">] {</span></span>
<span class="line"><span style="color:var(--astro-code-token-comment)">  /* dark colored assignments */</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">@media</span><span style="color:var(--astro-code-color-text)"> (prefers-color-scheme</span><span style="color:var(--astro-code-token-keyword)">:</span><span style="color:var(--astro-code-color-text)"> light) {</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">  [</span><span style="color:var(--astro-code-token-function)">data-theme</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-token-string-expression)">"base"</span><span style="color:var(--astro-code-color-text)">] {</span></span>
<span class="line"><span style="color:var(--astro-code-token-comment)">    /* light colored assignments */</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--astro-code-color-text)">  [</span><span style="color:var(--astro-code-token-function)">data-theme</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-token-string-expression)">"feature"</span><span style="color:var(--astro-code-color-text)">] {</span></span>
<span class="line"><span style="color:var(--astro-code-token-comment)">    /* slight contrast to light assignments as needed */</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">  }</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">@media</span><span style="color:var(--astro-code-color-text)"> (prefers-color-scheme</span><span style="color:var(--astro-code-token-keyword)">:</span><span style="color:var(--astro-code-color-text)"> dark) {</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">  [</span><span style="color:var(--astro-code-token-function)">data-theme</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-token-string-expression)">"base"</span><span style="color:var(--astro-code-color-text)">] {</span></span>
<span class="line"><span style="color:var(--astro-code-token-comment)">    /* dark colored assignments */</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--astro-code-color-text)">  [</span><span style="color:var(--astro-code-token-function)">data-theme</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-token-string-expression)">"feature"</span><span style="color:var(--astro-code-color-text)">] {</span></span>
<span class="line"><span style="color:var(--astro-code-token-comment)">    /* slight contrast to dark assignments as needed */</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">  }</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">}</span></span></code></pre>
<p>If you want to be more efficient, only serve the user-preference when it is set.</p>
<pre class="astro-code css-variables" style="background-color:var(--astro-code-color-background);color:var(--astro-code-color-text); overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:var(--astro-code-token-comment)">&#x3C;!-- first stylesheet is no-preference --></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">&#x3C;</span><span style="color:var(--astro-code-token-string-expression)">link</span><span style="color:var(--astro-code-token-function)"> href</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-token-string-expression)">"default.css"</span><span style="color:var(--astro-code-token-function)"> rel</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-token-string-expression)">"stylesheet"</span><span style="color:var(--astro-code-color-text)"> /></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">&#x3C;</span><span style="color:var(--astro-code-token-string-expression)">link</span><span style="color:var(--astro-code-token-function)"> href</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-token-string-expression)">"light.css"</span><span style="color:var(--astro-code-token-function)"> rel</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-token-string-expression)">"stylesheet"</span><span style="color:var(--astro-code-token-function)"> media</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-token-string-expression)">"(prefers-color-scheme: light)"</span><span style="color:var(--astro-code-color-text)"> /></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">&#x3C;</span><span style="color:var(--astro-code-token-string-expression)">link</span><span style="color:var(--astro-code-token-function)"> href</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-token-string-expression)">"dark.css"</span><span style="color:var(--astro-code-token-function)"> rel</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-token-string-expression)">"stylesheet"</span><span style="color:var(--astro-code-token-function)"> media</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-token-string-expression)">"(prefers-color-scheme: dark)"</span><span style="color:var(--astro-code-color-text)"> /></span></span></code></pre>
<p>As you can see, things get complicated when you are including user preference alongside the scoped themes but ‚Äúondark‚Äù is definitely not solving this. For scoped themes, it‚Äôs complex but not impossible. During the first pass, I recommend leaving user preference out to keep the execution simple but plan for it in a future implementation.</p>
<p>If it was only as easy as <code>body { filter: invert(1); }</code>!</p> </article> </div> </body>