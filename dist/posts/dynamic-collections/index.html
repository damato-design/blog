<!DOCTYPE html><head><meta charset="UTF-8"><title>Dynamic Astro Collections</title><meta name="viewport" content="width=device-width"><meta name="description" content="Design Systems Hot Takes"><meta name="generator" content="Astro v3.5.5"><meta property="og:title" content="Dynamic Astro Collections"><meta property="og:description" content="Design Systems Hot Takes"><meta property="og:url" content="https://blog.damato.design/posts/dynamic-collections/"><meta property="og:image" content="https://blog.damato.design/og-images/dynamic-collections.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="og:image:alt" content="Donnie D'Amato's blog"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@donniedamato"><meta name="twitter:creator" content="@donniedamato"><meta name="twitter:title" content="Dynamic Astro Collections"><meta name="twitter:description" content="Design Systems Hot Takes"><meta name="twitter:image" content="https://blog.damato.design/og-images/dynamic-collections.png"><meta name="twitter:image:alt" content="Donnie D'Amato's blog"><link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/site.webmanifest"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;700&family=PT+Sans+Narrow:wght@700&display=swap" rel="stylesheet"><style>@font-face{font-family:Garamond Nova;src:url(/fonts/garamondnova-italic.woff2) format("woff2");weight:400}@font-face{font-family:Garamond Nova;src:url(/fonts/garamondnova-light.woff2) format("woff2");weight:300}*,*:before,*:after{box-sizing:border-box}:root{--content-width: 860px;--card-width: 260px;--box-surface-bg: #f9f9f4;--box-surface-fg: #111;--box-contrast-bg: #001;--box-contrast-fg: #fff;--box-raised-bg: #fff;--box-raised-fg: #000;--box-raised-shadow: drop-shadow(0 .1rem .5rem rgba(0, 0, 0, .1))}body{margin:0;font-family:Merriweather,Book Antiqua,Palatino,Palatino Linotype,Palatino LT STD,Georgia,serif;font-size:1rem;font-weight:300;line-height:1.5;background:var(--box-surface-bg);color:var(--box-surface-fg);margin-bottom:10vw}img{max-width:100%}a{color:inherit;text-decoration-color:var(--heat);font-weight:700}.max-width{max-width:min(var(--content-width) - 2rem,100vw - 2rem);margin-inline:auto}header[data-astro-cid-3ef6ksr2]{padding-block:2rem}.max-width[data-astro-cid-3ef6ksr2]{display:flex;justify-content:space-between;align-items:center;gap:1rem}a[data-astro-cid-3ef6ksr2]{color:inherit;display:flex;flex-direction:column;text-decoration:none;line-height:1;font-size:1.5em}h1[data-astro-cid-3ef6ksr2]{font-size:1rem;font-weight:400;line-height:1;font-family:Garamond Nova}
.spine[data-astro-cid-vevxbnpu]{display:grid;grid-template-columns:auto 1fr auto;border-radius:2px;overflow:hidden}.spine[data-astro-cid-vevxbnpu]:after{content:"";display:block;grid-column:1 / -1;height:100%;grid-row:1 / -1;position:relative;pointer-events:none;box-shadow:inset 0 1rem 2rem #c8c8c880,inset 0 -1rem 2rem #c8c8c880}.animal[data-astro-cid-vevxbnpu]{grid-row:1;grid-column:1;width:16vw;max-width:10rem;display:flex;align-items:center;background:black;padding:1rem}.animal[data-astro-cid-vevxbnpu] img[data-astro-cid-vevxbnpu]{background:white;transform:rotate(-90deg)}.title[data-astro-cid-vevxbnpu]{grid-row:1;grid-column:2;container-type:inline-size;display:flex;align-items:center;justify-content:center;color:#fff;flex:1;font-family:Garamond Nova}.title[data-astro-cid-vevxbnpu] h2[data-astro-cid-vevxbnpu]{font-weight:300;font-size:8cqi;text-wrap:balance;line-height:1.1;padding:.25em;margin:0}.title[data-astro-cid-vevxbnpu] span[data-astro-cid-vevxbnpu]{text-wrap:nowrap;padding:1em;margin-inline-start:auto}.publisher[data-astro-cid-vevxbnpu]{grid-row:1;grid-column:3;background:black;color:#fff;display:flex;align-items:center;padding:1rem;text-decoration:none;--heat: currentColor}article{font-size:1.2em}article :where(h2,h3,h4,h5,h6){font-family:PT Sans Narrow;text-transform:capitalize}article code{font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;filter:brightness(.8)}article :not(pre)>code{color:var(--heat)}
</style></head><body style="--heat: #1AA8A7;"> <header data-astro-cid-3ef6ksr2> <div class="max-width" data-astro-cid-3ef6ksr2> <a href="/" data-astro-cid-3ef6ksr2> <svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 784.03 144.72" fill="currentColor" width="6em">
	<path d="m119.8,44.52c-3.62-8.51-8.68-15.94-15.18-22.31-6.5-6.36-14.1-11.32-22.81-14.87-8.71-3.55-18.16-5.33-28.34-5.33H0v140.7h53.87c10.05,0,19.43-1.77,28.14-5.33,8.71-3.55,16.28-8.51,22.71-14.87,6.43-6.36,11.46-13.83,15.07-22.41,3.62-8.57,5.43-17.82,5.43-27.74s-1.81-19.33-5.43-27.84Zm-24.42,53.47c-4.09,7.44-9.78,13.23-17.08,17.39-7.31,4.15-15.78,6.23-25.43,6.23h-29.75V23.11h29.75c9.51,0,17.92,2.08,25.23,6.23,7.3,4.15,13.03,9.92,17.19,17.29,4.15,7.37,6.23,15.88,6.23,25.53s-2.04,18.39-6.13,25.83Z" />
	<path style="fill: var(--heat, currentColor);" d="m160.9,4.52c-3.01-3.02-6.53-4.52-10.55-4.52s-7.71,1.51-10.65,4.52c-2.95,3.02-4.42,6.67-4.42,10.95,0,4.02,1.31,7.34,3.92,9.95,1.87,1.87,3.86,3.06,5.98,3.59l-11.91,22.24,12.26,6.63,14.87-27.34c1.88-3.62,3.18-6.6,3.92-8.94.73-2.34,1.11-4.39,1.11-6.13,0-4.29-1.51-7.94-4.52-10.95Z" />
	<path class="cls-1" d="m239.37,142.71h24.93L206.81,2.01h-16.08l-57.89,140.7h24.52l10.82-27.13h60.47l10.72,27.13Zm-63.18-47.23l22.36-56.1,22.16,56.1h-44.52Z" />
	<polygon points="396.95 2.01 343.69 89.69 290.42 2.01 274.34 2.01 274.34 142.71 297.46 142.71 297.46 52.61 335.65 115.37 351.73 115.37 389.92 52.61 389.92 142.71 413.03 142.71 413.03 2.01 396.95 2.01" />
	<path d="m529.61,142.71h24.92L497.05,2.01h-16.08l-57.89,140.7h24.52l10.82-27.13h60.47l10.72,27.13Zm-63.18-47.23l22.36-56.09,22.16,56.09h-44.52Z" />
	<polygon points="642.9 2.01 528.13 2.01 528.13 23.11 573.96 23.11 573.96 142.71 597.07 142.71 597.07 23.11 642.9 23.11 642.9 2.01" />
	<path d="m712.67,144.72c-10.05,0-19.43-1.88-28.14-5.63-8.71-3.75-16.35-8.94-22.91-15.58-6.57-6.63-11.69-14.34-15.38-23.12-3.69-8.77-5.53-18.19-5.53-28.24s1.84-19.43,5.53-28.14c3.68-8.71,8.78-16.38,15.28-23.01,6.5-6.63,14.07-11.79,22.71-15.48,8.64-3.68,17.99-5.53,28.04-5.53s19.4,1.84,28.04,5.53c8.64,3.69,16.25,8.84,22.81,15.48,6.56,6.63,11.69,14.34,15.38,23.12,3.68,8.78,5.53,18.19,5.53,28.24s-1.84,19.47-5.53,28.24c-3.69,8.78-8.78,16.45-15.28,23.01-6.5,6.57-14.07,11.73-22.71,15.48-8.64,3.75-17.92,5.63-27.84,5.63Zm-.4-22.11c9.51,0,17.85-2.14,25.02-6.43,7.17-4.29,12.79-10.22,16.88-17.79,4.09-7.57,6.13-16.31,6.13-26.23,0-7.37-1.17-14.1-3.52-20.2-2.35-6.1-5.66-11.39-9.95-15.88-4.29-4.49-9.35-7.94-15.18-10.35s-12.29-3.62-19.4-3.62c-9.38,0-17.66,2.11-24.82,6.33-7.17,4.22-12.8,10.08-16.88,17.59-4.09,7.51-6.13,16.22-6.13,26.13,0,7.37,1.17,14.17,3.52,20.4,2.34,6.23,5.63,11.56,9.85,15.98,4.22,4.42,9.28,7.87,15.18,10.35,5.9,2.48,12.33,3.72,19.3,3.72Z" />
</svg>
 <h1 data-astro-cid-3ef6ksr2>Design Systems Hot Takes</h1> </a> <a href="/feed.xml" data-astro-cid-3ef6ksr2> <svg viewBox="0 0 512 512" style="enable-background:new 0 0 512 512" role="presentation" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" width="2rem" fill="currentColor"><path d="M119.9 336.1c-30.8 0-55.9 25.1-55.9 55.8 0 30.8 25.1 55.6 55.9 55.6 30.9 0 55.9-24.9 55.9-55.6 0-30.7-25-55.8-55.9-55.8z"></path><path d="M64 192v79.9c48 0 94.1 14.2 128 48.1 33.9 33.9 48 79.9 48 128h80c0-139.9-116-256-256-256z"></path><path d="M64 64v79.9c171 0 303.9 133 303.9 304.1H448C448 236.3 276 64 64 64z"></path></svg> </a> </div> </header> <div data-astro-cid-vevxbnpu> <div class="spine max-width" data-astro-cid-vevxbnpu> <div class="animal" data-astro-cid-vevxbnpu> <img src="/animals/squirrel.png" data-astro-cid-vevxbnpu> </div> <div class="title" style="background: #1AA8A7" data-astro-cid-vevxbnpu> <h2 data-astro-cid-vevxbnpu>Dynamic Astro Collections</h2> <span data-astro-cid-vevxbnpu>8 min read</span> </div> <a class="publisher" href="/" data-astro-cid-vevxbnpu> <svg xmlns="http://www.w3.org/2000/svg" role="presentation" viewBox="0 0 784.03 144.72" fill="currentColor" width="6em">
	<path d="m119.8,44.52c-3.62-8.51-8.68-15.94-15.18-22.31-6.5-6.36-14.1-11.32-22.81-14.87-8.71-3.55-18.16-5.33-28.34-5.33H0v140.7h53.87c10.05,0,19.43-1.77,28.14-5.33,8.71-3.55,16.28-8.51,22.71-14.87,6.43-6.36,11.46-13.83,15.07-22.41,3.62-8.57,5.43-17.82,5.43-27.74s-1.81-19.33-5.43-27.84Zm-24.42,53.47c-4.09,7.44-9.78,13.23-17.08,17.39-7.31,4.15-15.78,6.23-25.43,6.23h-29.75V23.11h29.75c9.51,0,17.92,2.08,25.23,6.23,7.3,4.15,13.03,9.92,17.19,17.29,4.15,7.37,6.23,15.88,6.23,25.53s-2.04,18.39-6.13,25.83Z" />
	<path style="fill: var(--heat, currentColor);" d="m160.9,4.52c-3.01-3.02-6.53-4.52-10.55-4.52s-7.71,1.51-10.65,4.52c-2.95,3.02-4.42,6.67-4.42,10.95,0,4.02,1.31,7.34,3.92,9.95,1.87,1.87,3.86,3.06,5.98,3.59l-11.91,22.24,12.26,6.63,14.87-27.34c1.88-3.62,3.18-6.6,3.92-8.94.73-2.34,1.11-4.39,1.11-6.13,0-4.29-1.51-7.94-4.52-10.95Z" />
	<path class="cls-1" d="m239.37,142.71h24.93L206.81,2.01h-16.08l-57.89,140.7h24.52l10.82-27.13h60.47l10.72,27.13Zm-63.18-47.23l22.36-56.1,22.16,56.1h-44.52Z" />
	<polygon points="396.95 2.01 343.69 89.69 290.42 2.01 274.34 2.01 274.34 142.71 297.46 142.71 297.46 52.61 335.65 115.37 351.73 115.37 389.92 52.61 389.92 142.71 413.03 142.71 413.03 2.01 396.95 2.01" />
	<path d="m529.61,142.71h24.92L497.05,2.01h-16.08l-57.89,140.7h24.52l10.82-27.13h60.47l10.72,27.13Zm-63.18-47.23l22.36-56.09,22.16,56.09h-44.52Z" />
	<polygon points="642.9 2.01 528.13 2.01 528.13 23.11 573.96 23.11 573.96 142.71 597.07 142.71 597.07 23.11 642.9 23.11 642.9 2.01" />
	<path d="m712.67,144.72c-10.05,0-19.43-1.88-28.14-5.63-8.71-3.75-16.35-8.94-22.91-15.58-6.57-6.63-11.69-14.34-15.38-23.12-3.69-8.77-5.53-18.19-5.53-28.24s1.84-19.43,5.53-28.14c3.68-8.71,8.78-16.38,15.28-23.01,6.5-6.63,14.07-11.79,22.71-15.48,8.64-3.68,17.99-5.53,28.04-5.53s19.4,1.84,28.04,5.53c8.64,3.69,16.25,8.84,22.81,15.48,6.56,6.63,11.69,14.34,15.38,23.12,3.68,8.78,5.53,18.19,5.53,28.24s-1.84,19.47-5.53,28.24c-3.69,8.78-8.78,16.45-15.28,23.01-6.5,6.57-14.07,11.73-22.71,15.48-8.64,3.75-17.92,5.63-27.84,5.63Zm-.4-22.11c9.51,0,17.85-2.14,25.02-6.43,7.17-4.29,12.79-10.22,16.88-17.79,4.09-7.57,6.13-16.31,6.13-26.23,0-7.37-1.17-14.1-3.52-20.2-2.35-6.1-5.66-11.39-9.95-15.88-4.29-4.49-9.35-7.94-15.18-10.35s-12.29-3.62-19.4-3.62c-9.38,0-17.66,2.11-24.82,6.33-7.17,4.22-12.8,10.08-16.88,17.59-4.09,7.51-6.13,16.22-6.13,26.13,0,7.37,1.17,14.17,3.52,20.4,2.34,6.23,5.63,11.56,9.85,15.98,4.22,4.42,9.28,7.87,15.18,10.35,5.9,2.48,12.33,3.72,19.3,3.72Z" />
</svg>
 </a> </div> </div> <div class="max-width" style="--heat: #1AA8A7;"> <!-- <Navigation headings={ toc.get(1).children } /> --> <article style="--heat: #1AA8A7;"> <p>When I first heard of <a href="https://astro.build/">Astro</a> it sounded incredible. I thought of it as the next step after working with <a href="https://www.11ty.dev/">11ty</a>. That step is requiring framework support such as <a href="https://docs.astro.build/en/guides/integrations-guide/#official-integrations">React, Vue, or others</a>. While I often avoid frameworks, a framework allows for a shared understanding with a team to achieve a result within the guardrails, <a href="https://twitter.com/CherryJimbo/status/1643778121944952833">even if convoluted</a>.</p>
<p>So for documentation sites that expect to host components written in a framework, Astro seems like a solid choice. However, my initial review of the project had some serious critism when finally attempting to build a site.</p>
<h2 id="low-maintenance">Low maintenance</h2>
<p>One of the most important qualities of a documentation site is for it to be low maintenance. This can result in lots of different kinds of optimizations but one of the first I think about is how easy it is to create a new page and have it immediately appear in a navigational interface. It’s a non-starter if I need to configure simple navigation by letting the project know that I made a new page and where that new page is in the project. We can do better, but at the time Astro just couldn’t do this without accessing some internal methods and even then it didn’t seem possible without rebuilding the entire site. The ergonomics weren’t great and I decided to pause on the project.</p>
<h2 id="content-collections">Content collections</h2>
<p>Astro has come a long way since my complaints. Earlier this year with the release of their v2.0, they have introduced <a href="https://astro.build/blog/introducing-content-collections/">Content Collections</a>. Much of their post is talking about it being typesafe which is good but what I was more excited about was the ability to fetch content and manipulate it to render navigation.</p>
<p><a href="https://docs.astro.build/en/guides/content-collections/">The documentation suggests a few ways to configure a collection</a> but all of them assume you are manually curating the collection. I’d like to avoid this so you don’t need to provide much instruction past “put files here”.</p>
<p>Assume the following project <code>/src</code> file structure, reduced for brevity. We’ll be discussing each top-level directory and its setup to get this to work.</p>
<pre class="astro-code css-variables" style="background-color:var(--astro-code-color-background);color:var(--astro-code-color-text); overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:var(--astro-code-token-function)">├──</span><span style="color:var(--astro-code-token-string)"> components</span></span>
<span class="line"><span style="color:var(--astro-code-token-function)">│</span><span style="color:var(--astro-code-token-string)">   └──</span><span style="color:var(--astro-code-token-string)"> MainNavigation</span></span>
<span class="line"><span style="color:var(--astro-code-token-function)">│</span><span style="color:var(--astro-code-token-string)">       └──</span><span style="color:var(--astro-code-token-string)"> index.jsx</span></span>
<span class="line"><span style="color:var(--astro-code-token-function)">├──</span><span style="color:var(--astro-code-token-string)"> content</span></span>
<span class="line"><span style="color:var(--astro-code-token-function)">│</span><span style="color:var(--astro-code-token-string)">   ├──</span><span style="color:var(--astro-code-token-string)"> components</span></span>
<span class="line"><span style="color:var(--astro-code-token-function)">│</span><span style="color:var(--astro-code-token-string)">   │</span><span style="color:var(--astro-code-token-string)">   ├──</span><span style="color:var(--astro-code-token-string)"> button.mdx</span></span>
<span class="line"><span style="color:var(--astro-code-token-function)">│</span><span style="color:var(--astro-code-token-string)">   │</span><span style="color:var(--astro-code-token-string)">   └──</span><span style="color:var(--astro-code-token-string)"> ...</span></span>
<span class="line"><span style="color:var(--astro-code-token-function)">│</span><span style="color:var(--astro-code-token-string)">   ├──</span><span style="color:var(--astro-code-token-string)"> foundations</span></span>
<span class="line"><span style="color:var(--astro-code-token-function)">│</span><span style="color:var(--astro-code-token-string)">   │</span><span style="color:var(--astro-code-token-string)">   ├──</span><span style="color:var(--astro-code-token-string)"> color.mdx</span></span>
<span class="line"><span style="color:var(--astro-code-token-function)">│</span><span style="color:var(--astro-code-token-string)">   │</span><span style="color:var(--astro-code-token-string)">   └──</span><span style="color:var(--astro-code-token-string)"> ...</span></span>
<span class="line"><span style="color:var(--astro-code-token-function)">│</span><span style="color:var(--astro-code-token-string)">   ├──</span><span style="color:var(--astro-code-token-string)"> ...</span></span>
<span class="line"><span style="color:var(--astro-code-token-function)">│</span><span style="color:var(--astro-code-token-string)">   └──</span><span style="color:var(--astro-code-token-string)"> config.js</span></span>
<span class="line"><span style="color:var(--astro-code-token-function)">├──</span><span style="color:var(--astro-code-token-string)"> layouts</span></span>
<span class="line"><span style="color:var(--astro-code-token-function)">│</span><span style="color:var(--astro-code-token-string)">   └──</span><span style="color:var(--astro-code-token-string)"> Page.astro</span></span>
<span class="line"><span style="color:var(--astro-code-token-function)">├──</span><span style="color:var(--astro-code-token-string)"> pages</span></span>
<span class="line"><span style="color:var(--astro-code-token-function)">│</span><span style="color:var(--astro-code-token-string)">   ├──</span><span style="color:var(--astro-code-color-text)"> [collection]</span></span>
<span class="line"><span style="color:var(--astro-code-token-function)">│</span><span style="color:var(--astro-code-token-string)">   │</span><span style="color:var(--astro-code-token-string)">   └──</span><span style="color:var(--astro-code-color-text)"> [...slug].astro</span></span>
<span class="line"><span style="color:var(--astro-code-token-function)">│</span><span style="color:var(--astro-code-token-string)">   └──</span><span style="color:var(--astro-code-token-string)"> index.astro</span></span>
<span class="line"><span style="color:var(--astro-code-token-function)">├──</span><span style="color:var(--astro-code-token-string)"> utils</span></span>
<span class="line"><span style="color:var(--astro-code-token-function)">│</span><span style="color:var(--astro-code-token-string)">   └──</span><span style="color:var(--astro-code-token-string)"> getAllCollections.js</span></span>
<span class="line"><span style="color:var(--astro-code-token-function)">└──</span><span style="color:var(--astro-code-token-string)"> ...</span></span></code></pre>
<h3 id="content">Content</h3>
<p>The following is an example of how to <a href="https://docs.astro.build/en/guides/content-collections/#defining-a-collection-schema">define a collection from the Astro docs</a>. The most important part here is the <code>config.js</code> file shown below.</p>
<pre class="astro-code css-variables" style="background-color:var(--astro-code-color-background);color:var(--astro-code-color-text); overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:var(--astro-code-token-comment)">// 1. Import utilities from `astro:content`</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">import</span><span style="color:var(--astro-code-color-text)"> { z</span><span style="color:var(--astro-code-token-punctuation)">,</span><span style="color:var(--astro-code-color-text)"> defineCollection } </span><span style="color:var(--astro-code-token-keyword)">from</span><span style="color:var(--astro-code-token-string-expression)"> 'astro:content'</span><span style="color:var(--astro-code-color-text)">;</span></span>
<span class="line"><span style="color:var(--astro-code-token-comment)">// 2. Define your collection(s)</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">const</span><span style="color:var(--astro-code-token-constant)"> blogCollection</span><span style="color:var(--astro-code-token-keyword)"> =</span><span style="color:var(--astro-code-token-function)"> defineCollection</span><span style="color:var(--astro-code-color-text)">({</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">  schema</span><span style="color:var(--astro-code-token-keyword)">:</span><span style="color:var(--astro-code-token-constant)"> z</span><span style="color:var(--astro-code-token-function)">.object</span><span style="color:var(--astro-code-color-text)">({</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">    title</span><span style="color:var(--astro-code-token-keyword)">:</span><span style="color:var(--astro-code-token-constant)"> z</span><span style="color:var(--astro-code-token-function)">.string</span><span style="color:var(--astro-code-color-text)">()</span><span style="color:var(--astro-code-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">  })</span><span style="color:var(--astro-code-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">});</span></span>
<span class="line"><span style="color:var(--astro-code-token-comment)">// 3. Export a single `collections` object to register your collection(s)</span></span>
<span class="line"><span style="color:var(--astro-code-token-comment)">//    This key should match your collection directory name in "src/content"</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">export</span><span style="color:var(--astro-code-token-keyword)"> const</span><span style="color:var(--astro-code-token-constant)"> collections</span><span style="color:var(--astro-code-token-keyword)"> =</span><span style="color:var(--astro-code-color-text)"> {</span></span>
<span class="line"><span style="color:var(--astro-code-token-string-expression)">  'blog'</span><span style="color:var(--astro-code-token-keyword)">:</span><span style="color:var(--astro-code-color-text)"> blogCollection</span><span style="color:var(--astro-code-token-punctuation)">,</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">};</span></span></code></pre>
<p>Note the last comment. The key needs to match your collection directory name. This means that when you add a new directory, this file needs to know and have definitions added. I want to avoid that, so here’s my version:</p>
<pre class="astro-code css-variables" style="background-color:var(--astro-code-color-background);color:var(--astro-code-color-text); overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:var(--astro-code-token-keyword)">import</span><span style="color:var(--astro-code-color-text)"> path </span><span style="color:var(--astro-code-token-keyword)">from</span><span style="color:var(--astro-code-token-string-expression)"> 'path'</span><span style="color:var(--astro-code-color-text)">;</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">import</span><span style="color:var(--astro-code-color-text)"> { z</span><span style="color:var(--astro-code-token-punctuation)">,</span><span style="color:var(--astro-code-color-text)"> defineCollection } </span><span style="color:var(--astro-code-token-keyword)">from</span><span style="color:var(--astro-code-token-string-expression)"> 'astro:content'</span><span style="color:var(--astro-code-color-text)">;</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">const</span><span style="color:var(--astro-code-token-constant)"> glob</span><span style="color:var(--astro-code-token-keyword)"> =</span><span style="color:var(--astro-code-token-keyword)"> import</span><span style="color:var(--astro-code-token-function)">.</span><span style="color:var(--astro-code-token-constant)">meta</span><span style="color:var(--astro-code-token-function)">.glob</span><span style="color:var(--astro-code-color-text)">(</span><span style="color:var(--astro-code-token-string-expression)">'./**'</span><span style="color:var(--astro-code-color-text)">); </span><span style="color:var(--astro-code-token-comment)">/* vite */</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">export</span><span style="color:var(--astro-code-token-keyword)"> const</span><span style="color:var(--astro-code-token-constant)"> collectionNames</span><span style="color:var(--astro-code-token-keyword)"> =</span><span style="color:var(--astro-code-token-constant)"> Object</span><span style="color:var(--astro-code-token-function)">.keys</span><span style="color:var(--astro-code-color-text)">(glob)</span><span style="color:var(--astro-code-token-function)">.map</span><span style="color:var(--astro-code-color-text)">((filepath) </span><span style="color:var(--astro-code-token-keyword)">=></span><span style="color:var(--astro-code-token-constant)"> path</span><span style="color:var(--astro-code-token-function)">.basename</span><span style="color:var(--astro-code-color-text)">(</span><span style="color:var(--astro-code-token-constant)">path</span><span style="color:var(--astro-code-token-function)">.dirname</span><span style="color:var(--astro-code-color-text)">(filepath)));</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">const</span><span style="color:var(--astro-code-token-constant)"> schema</span><span style="color:var(--astro-code-token-keyword)"> =</span><span style="color:var(--astro-code-color-text)"> {</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">  schema</span><span style="color:var(--astro-code-token-keyword)">:</span><span style="color:var(--astro-code-token-constant)"> z</span><span style="color:var(--astro-code-token-function)">.object</span><span style="color:var(--astro-code-color-text)">({</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">    title</span><span style="color:var(--astro-code-token-keyword)">:</span><span style="color:var(--astro-code-token-constant)"> z</span><span style="color:var(--astro-code-token-function)">.string</span><span style="color:var(--astro-code-color-text)">()</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">  })</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">function</span><span style="color:var(--astro-code-token-function)"> assignCollection</span><span style="color:var(--astro-code-color-text)">(acc</span><span style="color:var(--astro-code-token-punctuation)">,</span><span style="color:var(--astro-code-color-text)"> name) {</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">  return</span><span style="color:var(--astro-code-token-constant)"> Object</span><span style="color:var(--astro-code-token-function)">.assign</span><span style="color:var(--astro-code-color-text)">(acc</span><span style="color:var(--astro-code-token-punctuation)">,</span><span style="color:var(--astro-code-color-text)"> { [name]</span><span style="color:var(--astro-code-token-keyword)">:</span><span style="color:var(--astro-code-token-function)"> defineCollection</span><span style="color:var(--astro-code-color-text)">({ </span><span style="color:var(--astro-code-token-keyword)">...</span><span style="color:var(--astro-code-color-text)">schema }) });</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">} </span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">export</span><span style="color:var(--astro-code-token-keyword)"> const</span><span style="color:var(--astro-code-token-constant)"> collections</span><span style="color:var(--astro-code-token-keyword)"> =</span><span style="color:var(--astro-code-token-constant)"> collectionNames</span><span style="color:var(--astro-code-token-function)">.reduce</span><span style="color:var(--astro-code-color-text)">(assignCollection</span><span style="color:var(--astro-code-token-punctuation)">,</span><span style="color:var(--astro-code-color-text)"> {});</span></span></code></pre>
<p>The first new part is using <a href="https://vitejs.dev/guide/features.html#glob-import">the <code>glob</code> function from Vite</a> to get all files relative to this config file. We could be more specific here to look only for <code>.md{x,} </code> but this works fine as-is.</p>
<p>After using the <code>glob</code> function to get the files, we parse the filepaths to get the directory that each one is in. This assumes that each section (eg., <code>/blog</code>) is only one level deep. This will return an array of directory names that we’ll use later. For us, this return <code>['components', 'foundations']</code>.</p>
<p>Finally, the <code>collectionNames</code> array is reduced using the <code>assignCollection</code> function. This creates a new collection definition with each section in the same way we would have done it manually in the original example. During the build step, Astro will create types based on the schema.</p>
<p>Before moving on, make sure you have some content in the markdown files (including the <code>title</code> frontmatter) to test out.</p>
<h3 id="pages">Pages</h3>
<p>Next we’ll dynamically render our pages. We’ve set up a <a href="https://docs.astro.build/en/core-concepts/routing/#dynamic-routes">dynamic route</a> at <code>[collection][...slug].astro</code>. As you might have guessed, the <code>collection</code> part is the directory name found within <code>/content</code> from earlier. For our file structure, this’ll eventually write <code>components</code> and <code>foundations</code> into the url. The slug is created from the file names in each of these directories (<code>button</code> and <code>color</code>). Here’s how we get that to work using frontmatter in the <code>[...slug].astro</code> file which is mostly copied from <a href="https://docs.astro.build/en/guides/content-collections/#building-for-static-output-default">the official documentation</a>.</p>
<pre class="astro-code css-variables" style="background-color:var(--astro-code-color-background);color:var(--astro-code-color-text); overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:var(--astro-code-token-keyword)">import</span><span style="color:var(--astro-code-color-text)"> Page </span><span style="color:var(--astro-code-token-keyword)">from</span><span style="color:var(--astro-code-token-string-expression)"> '@layouts/Page.astro'</span><span style="color:var(--astro-code-color-text)">;</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">import</span><span style="color:var(--astro-code-color-text)"> getAllCollections </span><span style="color:var(--astro-code-token-keyword)">from</span><span style="color:var(--astro-code-token-string-expression)"> '@utils/getAllCollections.js'</span><span style="color:var(--astro-code-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">export</span><span style="color:var(--astro-code-token-keyword)"> async</span><span style="color:var(--astro-code-token-keyword)"> function</span><span style="color:var(--astro-code-token-function)"> getStaticPaths</span><span style="color:var(--astro-code-color-text)">() {</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">  const</span><span style="color:var(--astro-code-token-constant)"> content</span><span style="color:var(--astro-code-token-keyword)"> =</span><span style="color:var(--astro-code-token-keyword)"> await</span><span style="color:var(--astro-code-token-function)"> getAllCollections</span><span style="color:var(--astro-code-color-text)">();</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">  return</span><span style="color:var(--astro-code-token-constant)"> content</span><span style="color:var(--astro-code-token-function)">.map</span><span style="color:var(--astro-code-color-text)">((entry) </span><span style="color:var(--astro-code-token-keyword)">=></span><span style="color:var(--astro-code-color-text)"> {</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">    params</span><span style="color:var(--astro-code-token-punctuation)">:</span><span style="color:var(--astro-code-color-text)"> { slug</span><span style="color:var(--astro-code-token-punctuation)">:</span><span style="color:var(--astro-code-token-constant)"> entry</span><span style="color:var(--astro-code-color-text)">.slug</span><span style="color:var(--astro-code-token-punctuation)">,</span><span style="color:var(--astro-code-color-text)"> collection</span><span style="color:var(--astro-code-token-punctuation)">:</span><span style="color:var(--astro-code-token-constant)"> entry</span><span style="color:var(--astro-code-color-text)">.collection }</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">    props</span><span style="color:var(--astro-code-token-punctuation)">:</span><span style="color:var(--astro-code-color-text)"> { entry }</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">  });</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">const</span><span style="color:var(--astro-code-color-text)"> { </span><span style="color:var(--astro-code-token-constant)">entry</span><span style="color:var(--astro-code-color-text)"> } </span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-token-constant)"> Astro</span><span style="color:var(--astro-code-color-text)">.props;</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">const</span><span style="color:var(--astro-code-color-text)"> { </span><span style="color:var(--astro-code-token-constant)">Content</span><span style="color:var(--astro-code-color-text)"> } </span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-token-keyword)"> await</span><span style="color:var(--astro-code-token-constant)"> entry</span><span style="color:var(--astro-code-token-function)">.render</span><span style="color:var(--astro-code-color-text)">();</span></span></code></pre>
<p>A few things to note. The <code>@layouts</code> alias points to the <code>/layouts</code> directory where I have a single <code>Page.astro</code> as the base layout. The <code>@utils</code> alias points to reusable functions. <a href="https://docs.astro.build/en/guides/aliases/">These aliases can be setup</a> in the <code>tsconfig.json</code> file at the root of the project. The <code>getAllCollections</code> function we will need to use twice. Once here to make the paths to content, and a second time to build navigation. I imagine there’s a way for this to run once, but this was easiest for me while I explored this solution.</p>
<p>This is what the <code>getAllCollections</code> function looks like:</p>
<pre class="astro-code css-variables" style="background-color:var(--astro-code-color-background);color:var(--astro-code-color-text); overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:var(--astro-code-token-keyword)">import</span><span style="color:var(--astro-code-color-text)"> { getCollection } </span><span style="color:var(--astro-code-token-keyword)">from</span><span style="color:var(--astro-code-token-string-expression)"> 'astro:content'</span><span style="color:var(--astro-code-color-text)">;</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">import</span><span style="color:var(--astro-code-color-text)"> { collectionNames } </span><span style="color:var(--astro-code-token-keyword)">from</span><span style="color:var(--astro-code-token-string-expression)"> '@content/config'</span><span style="color:var(--astro-code-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">export</span><span style="color:var(--astro-code-token-keyword)"> default</span><span style="color:var(--astro-code-token-keyword)"> async</span><span style="color:var(--astro-code-token-keyword)"> function</span><span style="color:var(--astro-code-token-function)"> getAllCollections</span><span style="color:var(--astro-code-color-text)">() {</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">  const</span><span style="color:var(--astro-code-token-constant)"> collections</span><span style="color:var(--astro-code-token-keyword)"> =</span><span style="color:var(--astro-code-token-keyword)"> await</span><span style="color:var(--astro-code-token-constant)"> Promise</span><span style="color:var(--astro-code-token-function)">.all</span><span style="color:var(--astro-code-color-text)">(</span></span>
<span class="line"><span style="color:var(--astro-code-token-constant)">    collectionNames</span><span style="color:var(--astro-code-token-function)">.map</span><span style="color:var(--astro-code-color-text)">((name) </span><span style="color:var(--astro-code-token-keyword)">=></span><span style="color:var(--astro-code-token-function)"> getCollection</span><span style="color:var(--astro-code-color-text)">(name));</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">  );</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">  return</span><span style="color:var(--astro-code-token-constant)"> collections</span><span style="color:var(--astro-code-token-function)">.flat</span><span style="color:var(--astro-code-color-text)">();</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">}</span></span></code></pre>
<p>The <code>getCollection</code> function from Astro will get the data for a single given collection. We have created a list of collections back at the <code>content/config.js</code> file as an export called <code>collectionNames</code>. So we loop over that to get all of the content and write the section it came from within the metadata. After resolving all the promises, we flatten the result because this is a single-level navigational structure. If you need nesting, you might not want to flatten the results here and have your own tree returned.</p>
<p>At this point we should be rendering pages dynamically. However, we’d also like to automatically generate a navigational interface from this too.</p>
<h3 id="layouts">Layouts</h3>
<p>In the <code>Page.astro</code> file, we’ll need to manipulate the result of the <code>getAllCollections</code> function to create a tree for navigation.</p>
<pre class="astro-code css-variables" style="background-color:var(--astro-code-color-background);color:var(--astro-code-color-text); overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:var(--astro-code-token-keyword)">import</span><span style="color:var(--astro-code-color-text)"> path </span><span style="color:var(--astro-code-token-keyword)">from</span><span style="color:var(--astro-code-token-string-expression)"> 'path'</span><span style="color:var(--astro-code-color-text)">;</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">import</span><span style="color:var(--astro-code-color-text)"> getAllCollections </span><span style="color:var(--astro-code-token-keyword)">from</span><span style="color:var(--astro-code-token-string-expression)"> '@utils/getAllCollections.js'</span><span style="color:var(--astro-code-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">function</span><span style="color:var(--astro-code-token-function)"> buildNavigation</span><span style="color:var(--astro-code-color-text)">(collections) {</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">  return</span><span style="color:var(--astro-code-token-constant)"> collections</span><span style="color:var(--astro-code-token-function)">.reduce</span><span style="color:var(--astro-code-color-text)">((acc</span><span style="color:var(--astro-code-token-punctuation)">,</span><span style="color:var(--astro-code-color-text)"> entry) </span><span style="color:var(--astro-code-token-keyword)">=></span><span style="color:var(--astro-code-color-text)"> {</span></span>
<span class="line"><span style="color:var(--astro-code-token-comment)">    // collection is the collectionName string</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">    const</span><span style="color:var(--astro-code-color-text)"> { </span><span style="color:var(--astro-code-token-constant)">collection</span><span style="color:var(--astro-code-color-text)"> } </span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-color-text)"> entry;</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">    if</span><span style="color:var(--astro-code-color-text)"> (</span><span style="color:var(--astro-code-token-keyword)">!</span><span style="color:var(--astro-code-color-text)">acc[collection]) acc[collection] </span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-color-text)"> {};</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">    const</span><span style="color:var(--astro-code-color-text)"> { </span><span style="color:var(--astro-code-token-constant)">slug</span><span style="color:var(--astro-code-token-punctuation)">,</span><span style="color:var(--astro-code-token-constant)"> data</span><span style="color:var(--astro-code-color-text)"> } </span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-color-text)"> collection;</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">    acc[collection][</span><span style="color:var(--astro-code-token-constant)">data</span><span style="color:var(--astro-code-color-text)">.title] </span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-token-constant)"> path</span><span style="color:var(--astro-code-token-function)">.join</span><span style="color:var(--astro-code-color-text)">(</span><span style="color:var(--astro-code-token-keyword)">import</span><span style="color:var(--astro-code-color-text)">.</span><span style="color:var(--astro-code-token-constant)">meta</span><span style="color:var(--astro-code-color-text)">.</span><span style="color:var(--astro-code-token-constant)">env</span><span style="color:var(--astro-code-color-text)">.</span><span style="color:var(--astro-code-token-constant)">BASE_URL</span><span style="color:var(--astro-code-token-punctuation)">,</span><span style="color:var(--astro-code-color-text)"> collection</span><span style="color:var(--astro-code-token-punctuation)">,</span><span style="color:var(--astro-code-color-text)"> slug);</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">  }</span><span style="color:var(--astro-code-token-punctuation)">,</span><span style="color:var(--astro-code-color-text)"> {})</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">const</span><span style="color:var(--astro-code-token-constant)"> collections</span><span style="color:var(--astro-code-token-keyword)"> =</span><span style="color:var(--astro-code-token-keyword)"> await</span><span style="color:var(--astro-code-token-function)"> getAllCollections</span><span style="color:var(--astro-code-color-text)">();</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">const</span><span style="color:var(--astro-code-token-constant)"> tree</span><span style="color:var(--astro-code-token-keyword)"> =</span><span style="color:var(--astro-code-token-function)"> buildNavigation</span><span style="color:var(--astro-code-color-text)">(collections);</span></span></code></pre>
<p>As we loop over the items in the collection, we get the <code>title</code> and build the <code>url</code>.</p>
<p>{% aside %}
If you want your navigation to have a specific order, you’d need to either include additional metadata in the <code>/content</code> markdown files for this function to sort by and/or provide an order to the <code>collectionNames</code> within the <code>content/config.js</code>.
{% endaside %}</p>
<h3 id="components">Components</h3>
<p>Finally we create a navigation component to consume the <code>tree</code>. This could be done in any framework, even as an Astro component since it can be a list of links. I’ve chosen to use React to have several subcomponents in the same file.</p>
<pre class="astro-code css-variables" style="background-color:var(--astro-code-color-background);color:var(--astro-code-color-text); overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:var(--astro-code-token-keyword)">import</span><span style="color:var(--astro-code-color-text)"> React </span><span style="color:var(--astro-code-token-keyword)">from</span><span style="color:var(--astro-code-token-string-expression)"> 'react'</span><span style="color:var(--astro-code-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">function</span><span style="color:var(--astro-code-token-function)"> Section</span><span style="color:var(--astro-code-color-text)">({ section</span><span style="color:var(--astro-code-token-punctuation)">,</span><span style="color:var(--astro-code-color-text)"> entries }) {</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">  const</span><span style="color:var(--astro-code-token-constant)"> navigation</span><span style="color:var(--astro-code-token-keyword)"> =</span><span style="color:var(--astro-code-token-constant)"> Object</span><span style="color:var(--astro-code-token-function)">.entries</span><span style="color:var(--astro-code-color-text)">(entries);</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">  if</span><span style="color:var(--astro-code-color-text)"> (</span><span style="color:var(--astro-code-token-keyword)">!</span><span style="color:var(--astro-code-token-constant)">navigation</span><span style="color:var(--astro-code-color-text)">.</span><span style="color:var(--astro-code-token-constant)">length</span><span style="color:var(--astro-code-color-text)">) </span><span style="color:var(--astro-code-token-keyword)">return</span><span style="color:var(--astro-code-token-constant)"> null</span><span style="color:var(--astro-code-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">  return</span><span style="color:var(--astro-code-color-text)"> (</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">    &#x3C;</span><span style="color:var(--astro-code-token-string-expression)">li</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">      &#x3C;</span><span style="color:var(--astro-code-token-string-expression)">span</span><span style="color:var(--astro-code-color-text)">>{section}&#x3C;/</span><span style="color:var(--astro-code-token-string-expression)">span</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">      &#x3C;</span><span style="color:var(--astro-code-token-string-expression)">ul</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">        { </span><span style="color:var(--astro-code-token-constant)">navigation</span><span style="color:var(--astro-code-token-function)">.map</span><span style="color:var(--astro-code-color-text)">(([title</span><span style="color:var(--astro-code-token-punctuation)">,</span><span style="color:var(--astro-code-color-text)"> url]) </span><span style="color:var(--astro-code-token-keyword)">=></span><span style="color:var(--astro-code-color-text)"> </span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">          &#x3C;</span><span style="color:var(--astro-code-token-constant)">Item</span><span style="color:var(--astro-code-token-function)"> name</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-color-text)">{ title } </span><span style="color:var(--astro-code-token-function)">url</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-color-text)">{ url } </span><span style="color:var(--astro-code-token-function)">key</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-color-text)">{ name }/></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">        )}</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">      &#x3C;/</span><span style="color:var(--astro-code-token-string-expression)">ul</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">    &#x3C;/</span><span style="color:var(--astro-code-token-string-expression)">li</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">  );</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">function</span><span style="color:var(--astro-code-token-function)"> Item</span><span style="color:var(--astro-code-color-text)">({ title</span><span style="color:var(--astro-code-token-punctuation)">,</span><span style="color:var(--astro-code-color-text)"> url }) {</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">  return</span><span style="color:var(--astro-code-color-text)"> (</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">    &#x3C;</span><span style="color:var(--astro-code-token-string-expression)">li</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">      &#x3C;</span><span style="color:var(--astro-code-token-string-expression)">a</span><span style="color:var(--astro-code-token-function)"> href</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-color-text)">{ url }>{ title }&#x3C;/</span><span style="color:var(--astro-code-token-string-expression)">a</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">    &#x3C;/</span><span style="color:var(--astro-code-token-string-expression)">li</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">  );</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">export</span><span style="color:var(--astro-code-token-keyword)"> default</span><span style="color:var(--astro-code-token-keyword)"> function</span><span style="color:var(--astro-code-token-function)"> MainNavigation</span><span style="color:var(--astro-code-color-text)">({ tree }) {</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">  const</span><span style="color:var(--astro-code-token-constant)"> navigation</span><span style="color:var(--astro-code-token-keyword)"> =</span><span style="color:var(--astro-code-token-constant)"> Object</span><span style="color:var(--astro-code-token-function)">.entries</span><span style="color:var(--astro-code-color-text)">(tree);</span></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">  if</span><span style="color:var(--astro-code-color-text)"> (</span><span style="color:var(--astro-code-token-keyword)">!</span><span style="color:var(--astro-code-token-constant)">navigation</span><span style="color:var(--astro-code-color-text)">.</span><span style="color:var(--astro-code-token-constant)">length</span><span style="color:var(--astro-code-color-text)">) </span><span style="color:var(--astro-code-token-keyword)">return</span><span style="color:var(--astro-code-token-constant)"> null</span><span style="color:var(--astro-code-color-text)">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:var(--astro-code-token-keyword)">  return</span><span style="color:var(--astro-code-color-text)"> (</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">    &#x3C;</span><span style="color:var(--astro-code-token-string-expression)">nav</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">      &#x3C;</span><span style="color:var(--astro-code-token-string-expression)">ul</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">        { </span><span style="color:var(--astro-code-token-constant)">navigation</span><span style="color:var(--astro-code-token-function)">.map</span><span style="color:var(--astro-code-color-text)">(([section</span><span style="color:var(--astro-code-token-punctuation)">,</span><span style="color:var(--astro-code-color-text)"> entries]) </span><span style="color:var(--astro-code-token-keyword)">=></span><span style="color:var(--astro-code-color-text)"> </span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">          &#x3C;</span><span style="color:var(--astro-code-token-constant)">Section</span><span style="color:var(--astro-code-token-function)"> section</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-color-text)">{ section } </span><span style="color:var(--astro-code-token-function)">entries</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-color-text)">{ entries } </span><span style="color:var(--astro-code-token-function)">key</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-color-text)">{ section }/></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">        )}</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">      &#x3C;/</span><span style="color:var(--astro-code-token-string-expression)">ul</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">    &#x3C;/</span><span style="color:var(--astro-code-token-string-expression)">nav</span><span style="color:var(--astro-code-color-text)">></span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">  )</span></span>
<span class="line"><span style="color:var(--astro-code-color-text)">}</span></span></code></pre>
<p>There’s nothing special to see here. The incoming <code>tree</code> prop is the object that represents the navigation for the content made in the <code>buildNavigation</code> function from earlier. The component will traverse the tree and render out the links.</p>
<p>Finally, back in the <code>Page.astro</code> file, import the <code>&#x3C;MainNavigation/></code> and render it in the body passing in the <code>tree</code>.</p>
<pre class="astro-code css-variables" style="background-color:var(--astro-code-color-background);color:var(--astro-code-color-text); overflow-x: auto;" tabindex="0"><code><span class="line"><span style="color:var(--astro-code-color-text)">&#x3C;</span><span style="color:var(--astro-code-token-constant)">MainNavigation</span><span style="color:var(--astro-code-token-function)"> tree</span><span style="color:var(--astro-code-token-keyword)">=</span><span style="color:var(--astro-code-color-text)">{ tree }></span></span></code></pre>
<p>And that’s it! Now as markdown pages are created in the <code>/content</code> directory, they are automatically added to the navigation.</p> </article> </div> </body>